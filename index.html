<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>WebXR Audio Experience</title>

  <!-- Remove favicon warnings -->
  <link rel="icon" href="data:,">

  <link rel="stylesheet" href="styles/main.css">
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

  <!-- Scripts -->
  <script defer src="scripts/proximity.js"></script>
  <script defer src="scripts/audio.js"></script>
  <script defer src="scripts/start.js"></script>
</head>

<body>

<!-- START OVERLAY -->
<div id="startOverlay">
  <div id="startButtons">
    <button id="startButton">START</button>
    <button id="debugButton">DESKTOP DEBUG</button>
  </div>
</div>

<!-- MOBILE BLACKOUT -->
<div id="blackoutScreen"></div>

<a-scene
  xr="ar: true; referenceSpaceType: local-floor;"
  webxr="optionalFeatures: local-floor, hit-test;"
  renderer="colorManagement:true"
  vr-mode-ui="enabled:false"
  ar-mode-ui="enabled:false">

  <!-- CAMERA (neutral, AR-safe) -->
  <a-entity id="camera"
    camera
    look-controls="enabled:true"
    wasd-controls="enabled:false">
  </a-entity>

  <!-- INTRO AUDIO -->
  <a-entity id="intro"
    sound="src:url(assets/audio/audio_intro.wav);
           autoplay:false; positional:false; loop:false; volume:1;">
  </a-entity>

  <!-- AMBIENT AUDIO -->
  <a-entity id="ambient"
    sound="src:url(assets/audio/audio_ambience.wav);
           autoplay:false; positional:true; volume:1;">
  </a-entity>

  <!-- AMBIENT CONTROLLER -->
  <a-entity id="ambientCenter"
    position="0 1 0"
    ambient-proximity="
      ambient:#ambient;
      maxRadius:4;
      falloff:0.05;
      plateau:0.5">
  </a-entity>

  <!-- =============================================================== -->
  <!-- AUDIO CLUSTERS (FRONT / BACK / LEFT / RIGHT)                     -->
  <!-- =============================================================== -->

  <!-- FRONT CLUSTER -->
  <a-sphere id="a1" radius="0.3" color="#FFD400" visible="true" position="0 1 -1"></a-sphere>
  <a-entity id="s1" position="0 1 -1" sound="src:url(assets/audio/audio_1.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="b1" radius="0.3" color="#00FFFF" visible="false" position="0 1 -2"></a-sphere>
  <a-entity id="s1b" position="0 1 -2" sound="src:url(assets/audio/audio_1b.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="c1" radius="0.3" color="#FF8800" visible="false" position="1 1 -2"></a-sphere>
  <a-entity id="s1c" position="1 1 -2" sound="src:url(assets/audio/audio_1c.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="d1" radius="0.3" color="#FF8800" visible="false" position="-1 1 -2"></a-sphere>
  <a-entity id="s1d" position="-1 1 -2" sound="src:url(assets/audio/audio_1d.wav); autoplay:false; positional:true;"></a-entity>

  <a-entity id="frontCluster"
    cluster-proximity="
      soundA:#s1;
      soundB:#s1b;
      soundC:#s1c;
      soundD:#s1d;
      asphere:#a1;
      bsphere:#b1;
      csphere:#c1;
      dsphere:#d1;
      distance:0.75">
  </a-entity>

  <!-- BACK CLUSTER -->
  <a-sphere id="a2" radius="0.3" color="#FFD400" visible="true" position="0 1 1"></a-sphere>
  <a-entity id="s2" position="0 1 1" sound="src:url(assets/audio/audio_2.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="b2" radius="0.3" color="#00FFFF" visible="false" position="0 1 2"></a-sphere>
  <a-entity id="s2b" position="0 1 2" sound="src:url(assets/audio/audio_2b.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="c2" radius="0.3" color="#FF8800" visible="false" position="-1 1 2"></a-sphere>
  <a-entity id="s2c" position="-1 1 2" sound="src:url(assets/audio/audio_2c.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="d2" radius="0.3" color="#FF8800" visible="false" position="1 1 2"></a-sphere>
  <a-entity id="s2d" position="1 1 2" sound="src:url(assets/audio/audio_2d.wav); autoplay:false; positional:true;"></a-entity>

  <a-entity id="backCluster"
    cluster-proximity="
      soundA:#s2;
      soundB:#s2b;
      soundC:#s2c;
      soundD:#s2d;
      asphere:#a2;
      bsphere:#b2;
      csphere:#c2;
      dsphere:#d2;
      distance:0.75">
  </a-entity>

  <!-- RIGHT CLUSTER -->
  <a-sphere id="a3" radius="0.3" color="#FFD400" visible="true" position="1 1 0"></a-sphere>
  <a-entity id="s3" position="1 1 0" sound="src:url(assets/audio/audio_3.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="b3" radius="0.3" color="#00FFFF" visible="false" position="2 1 0"></a-sphere>
  <a-entity id="s3b" position="2 1 0" sound="src:url(assets/audio/audio_3b.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="c3" radius="0.3" color="#FF8800" visible="false" position="2 1 1"></a-sphere>
  <a-entity id="s3c" position="2 1 1" sound="src:url(assets/audio/audio_3c.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="d3" radius="0.3" color="#FF8800" visible="false" position="2 1 -1"></a-sphere>
  <a-entity id="s3d" position="2 1 -1" sound="src:url(assets/audio/audio_3d.wav); autoplay:false; positional:true;"></a-entity>

  <a-entity id="rightCluster"
    cluster-proximity="
      soundA:#s3;
      soundB:#s3b;
      soundC:#s3c;
      soundD:#s3d;
      asphere:#a3;
      bsphere:#b3;
      csphere:#c3;
      dsphere:#d3;
      distance:0.75">
  </a-entity>

  <!-- LEFT CLUSTER -->
  <a-sphere id="a4" radius="0.3" color="#FFD400" visible="true" position="-1 1 0"></a-sphere>
  <a-entity id="s4" position="-1 1 0" sound="src:url(assets/audio/audio_4.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="b4" radius="0.3" color="#00FFFF" visible="false" position="-2 1 0"></a-sphere>
  <a-entity id="s4b" position="-2 1 0" sound="src:url(assets/audio/audio_4b.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="c4" radius="0.3" color="#FF8800" visible="false" position="-2 1 -1"></a-sphere>
  <a-entity id="s4c" position="-2 1 -1" sound="src:url(assets/audio/audio_4c.wav); autoplay:false; positional:true;"></a-entity>

  <a-sphere id="d4" radius="0.3" color="#FF8800" visible="false" position="-2 1 1"></a-sphere>
  <a-entity id="s4d" position="-2 1 1" sound="src:url(assets/audio/audio_4d.wav); autoplay:false; positional:true;"></a-entity>

  <a-entity id="leftCluster"
    cluster-proximity="
      soundA:#s4;
      soundB:#s4b;
      soundC:#s4c;
      soundD:#s4d;
      asphere:#a4;
      bsphere:#b4;
      csphere:#c4;
      dsphere:#d4;
      distance:0.75">
  </a-entity>

</a-scene>

</body>
</html>
