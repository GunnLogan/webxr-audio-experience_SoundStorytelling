<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>WebXR Audio Experience</title>

  <link rel="stylesheet" href="styles/main.css">

  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

  <!-- Scripts -->
  <script defer src="scripts/proximity.js"></script>
  <script defer src="scripts/audio.js"></script>
  <script defer src="scripts/start.js"></script>
  <script defer src="scripts/desktop-debug.js"></script>
</head>

<body>

<!-- START OVERLAY -->
<div id="startOverlay">
  <div id="startButtons">
    <button id="startButton">START</button>
    <button id="debugButton">DESKTOP DEBUG</button>
  </div>
</div>

<a-scene renderer="colorManagement:true" vr-mode-ui="enabled:false" ar-mode-ui="enabled:false">

  <!-- CAMERA -->
  <a-entity id="camera"
    camera
    wasd-controls="enabled:false"
    look-controls="enabled:false; pointerLockEnabled:false"
    position="0 1.6 0">
  </a-entity>

  <!-- INTRO (plays once via start.js) -->
  <a-entity id="intro"
    sound="src:url(assets/audio/audio_intro.wav);
           autoplay:false;
           positional:false;
           loop:false;
           volume:1;">
  </a-entity>

  <!-- AMBIENCE (non-looping, triggered once near center by ambient-center) -->
  <a-entity id="ambient"
    sound="src:url(assets/audio/audio_ambience.wav);
           autoplay:false;
           positional:false;
           loop:false;
           volume:1;">
  </a-entity>

  <!-- AMBIENT CENTER CONTROLLER (radius 0.75 m around world center) -->
  <a-entity id="ambientCenter"
    position="0 1 0"
    ambient-center="ambient:#ambient; radius:0.75">
  </a-entity>

  <!-- SIMPLE GRID -->
  <a-entity line="start:-5 0 0; end:5 0 0; color:#555"></a-entity>
  <a-entity line="start:0 0 -5; end:0 0 5; color:#555"></a-entity>

  <!-- =============================================================== -->
  <!--  FRONT = AUDIO 1                                                -->
  <!--  A1 = 1 m forward from center                                  -->
  <!--  B1 = 1 m forward from A1                                      -->
  <!--  C1 = 1 m diag right from B1                                   -->
  <!--  D1 = 1 m diag left from B1                                    -->
  <!-- =============================================================== -->

  <!-- Debug / logical spheres -->
  <a-sphere id="a1" radius="0.75" color="#FFD400" visible="false" position="0 1 -1"></a-sphere>
  <a-sphere id="b1" radius="0.75" color="#00FFFF" visible="false" position="0 1 -2"></a-sphere>
  <a-sphere id="c1" radius="0.75" color="#FF8800" visible="false" position="1 1 -2"></a-sphere>
  <a-sphere id="d1" radius="0.75" color="#FF8800" visible="false" position="-1 1 -2"></a-sphere>

  <!-- Audio entities -->
  <a-entity id="s1"  sound="src:url(assets/audio/audio_1.wav);  positional:false; loop:false;"></a-entity>
  <a-entity id="s1b" sound="src:url(assets/audio/audio_1b.wav); positional:false; loop:false;"></a-entity>
  <a-entity id="s1c" sound="src:url(assets/audio/audio_1c.wav); positional:false; loop:false;"></a-entity>
  <a-entity id="s1d" sound="src:url(assets/audio/audio_1d.wav); positional:false; loop:false;"></a-entity>

  <!-- Cluster controller (per-sphere triggers handled in component) -->
  <a-entity id="frontCluster"
    cluster-proximity="
      soundA:#s1;
      soundB:#s1b;
      soundC:#s1c;
      soundD:#s1d;
      asphere:#a1;
      bsphere:#b1;
      csphere:#c1;
      dsphere:#d1;
      distance:0.75;">
  </a-entity>

  <!-- =============================================================== -->
  <!--  BACK = AUDIO 2                                                 -->
  <!-- =============================================================== -->

  <a-sphere id="a2" radius="0.75" color="#FFD400" visible="false" position="0 1 1"></a-sphere>
  <a-sphere id="b2" radius="0.75" color="#00FFFF" visible="false" position="0 1 2"></a-sphere>
  <a-sphere id="c2" radius="0.75" color="#FF8800" visible="false" position="-1 1 2"></a-sphere>
  <a-sphere id="d2" radius="0.75" color="#FF8800" visible="false" position="1 1 2"></a-sphere>

  <a-entity id="s2"  sound="src:url(assets/audio/audio_2.wav);  positional:false; loop:false;"></a-entity>
  <a-entity id="s2b" sound="src:url(assets/audio/audio_2b.wav); positional:false; loop:false;"></a-entity>
  <a-entity id="s2c" sound="src:url(assets/audio/audio_2c.wav); positional:false; loop:false;"></a-entity>
  <a-entity id="s2d" sound="src:url(assets/audio/audio_2d.wav); positional:false; loop:false;"></a-entity>

  <a-entity id="backCluster"
    cluster-proximity="
      soundA:#s2;
      soundB:#s2b;
      soundC:#s2c;
      soundD:#s2d;
      asphere:#a2;
      bsphere:#b2;
      csphere:#c2;
      dsphere:#d2;
      distance:0.75;">
  </a-entity>

  <!-- =============================================================== -->
  <!--  RIGHT = AUDIO 3
